<?php	/*+-----------------------------------------------------------------------------------------+	  | 短信模型	  +-----------------------------------------------------------------------------------------+	  | 版权所有 lamp兄弟连源代码小组							  +-----------------------------------------------------------------------------------------+	  | 作者: 范培 (52web@sina.cn)								  | 最后修改时间: 2012-01-14 15:50   											  +-----------------------------------------------------------------------------------------+	*/		class Sms{	/*		发送短信		@param1 int 发送者的uid 		@param2 int 接收者的uid		@param3 string 发送者的操作 save=保存 del=删除		@param4 string 接收人的操作 save=保存 del=删除		@param5 int 类型 0=管理员短信  1=普通用户短信  2=好友请求验证  3=打招呼 4=系统信息  默认值1		@param6 string 发送的内容		@return boolean	*/	public function send_sms($src_id,$dst_id,$src_ope,$dst_ope,$type,$content){		$sms_insert=array();		$sms_insert['dst_id']=$dst_id;//收信人id		$sms_insert['src_id']=$src_id;//发信人的id		$sms_insert['content']=$content;//信息内容		$sms_insert['dst_ope']=$dst_ope;//收信人的动作(保存/删除)		$sms_insert['src_ope']=$src_ope;//发信人的动作(保存/删除)		$sms_insert['is_read']='0';//是否已读		//如果是系统信息,则来源id为服务器的ip,否则是客户端的ip		if($type==4){			$sms_insert['ip']=sprintf('%u',ip2long($_SERVER['SERVER_ADDR']));		}else{			$sms_insert['ip']=sprintf('%u',ip2long($_SERVER['REMOTE_ADDR']));		}		$sms_insert['sms_sort']=$type;//信息类型		$sms_insert['ptime']=time();//发信时间		//如果发信成功,返回true,否则false		if(D('sms')->insert($sms_insert)){			return true;		}else{			return false;		}	}		}